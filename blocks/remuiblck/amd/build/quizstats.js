"use strict";define(["jquery","core/chartjs"],function(i){var s,r="#barChart",o="#quiz-chart-area",t="#quiz-course-list",a="option:selected",c=".quiz-stats-error",u=null;function n(n){var e=i(n).find(t+" "+a).data("id");i.ajax({type:"GET",async:!0,url:M.cfg.wwwroot+"/theme/remui/request_handler.php?action=get_courses_for_quiz&courseid="+e+"&sesskey="+M.cfg.sesskey,success:function(e){if(void 0===(s=JSON.parse(e)).datasets)i(n).find(o).hide(),i(n).find(c).show();else{null!==u&&u.destroy();var t=i(n).find(r).get(0).getContext("2d");t.canvas.height=400;var a={labels:s.labels,datasets:s.datasets};u=new Chart(t,{type:"bar",data:a,options:{responsive:!0,maintainAspectRatio:!1,scales:{yAxes:[{scaleLabel:{display:!0,labelString:M.util.get_string("noofstudents","block_remuiblck")},ticks:{min:0,stepSize:function(e){var a=0,n=void 0;return e.forEach(function(e,t){n=Math.max.apply(Math,e.data),a=a<n?n:a}),Math.ceil(a/20)}(s.datasets)}}]}}})}},error:function(e,t,a){i(n).find(o).hide(),i(n).find(c).show()}})}return{init:function(e){i(document).ready(function(){!function(e){i(e).find(t).on("change",function(){n(e)})}(e),i(e).find(r).length&&n(e)})}}});