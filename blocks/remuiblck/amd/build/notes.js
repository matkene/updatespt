"use strict";define(["jquery"],function(s){var t,i,o,n,r=".add-notes-button",e=".add-notes-select",u=".site-note",c=".course-note",d=".personal-note",a=".select2-studentlist";s(e).length&&(s(r).hide(),s(a).hide(),s(e+" select").on("change",function(){if(s(r).hide(),t=s(this).children(":selected").attr("id"),n=s(this).children(":selected").text(),void 0===t)return s(a).empty(),void s(a).hide();s.ajax({type:"GET",async:!0,url:M.cfg.wwwroot+"/theme/remui/request_handler.php?action=get_userlist&courseid="+t+"&sesskey="+M.cfg.sesskey,success:function(e){var t=JSON.parse(e);i=Object.keys(t).length,s(a).show(),s(a).empty(),i?s(a).append("<option>"+M.util.get_string("selectastudent","theme_remui")+" ("+M.util.get_string("total","theme_remui")+": "+i+")</option>"):s(a).append("<option>"+M.util.get_string("nousersenrolledincourse","theme_remui",n)+"</option>"),s.each(t,function(e,t){s(a).append('<option value="'+e+'">'+t.firstname+" "+t.lastname+"</option>")}),e=""},error:function(e,t,i){s(a).html("<option>"+i+"</option>")}})}),s(a).on("change",function(){s(r).show(),o=s(this).find("option:selected").val();var e=M.cfg.wwwroot+"/notes/edit.php?courseid="+t+"&userid="+o+"&publishstate=site";s(r+" "+u).attr("href",e),e=M.cfg.wwwroot+"/notes/edit.php?courseid="+t+"&userid="+o+"&publishstate=public",s(r+" "+c).attr("href",e),e=M.cfg.wwwroot+"/notes/edit.php?courseid="+t+"&userid="+o+"&publishstate=draft",s(r+" "+d).attr("href",e)}))});